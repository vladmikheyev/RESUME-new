import { cx, css } from 'emotion';
import P, { createContext, forwardRef, useContext, useState, useMemo, Children, isValidElement } from 'react';
import { Box } from '@contentful/f36-core';
import a from '@contentful/f36-tokens';
import { Caption, Text } from '@contentful/f36-typography';
import { SortIcon, SortAscendingIcon, SortDescendingIcon } from '@contentful/f36-icons';

var ie=Object.defineProperty,de=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var L=(o,t,e)=>t in o?ie(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,n=(o,t)=>{for(var e in t||(t={}))W.call(t,e)&&L(o,e,t[e]);if(C)for(var e of C(t))$.call(t,e)&&L(o,e,t[e]);return o},s=(o,t)=>de(o,me(t));var i=(o,t)=>{var e={};for(var r in o)W.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&C)for(var r of C(o))t.indexOf(r)<0&&$.call(o,r)&&(e[r]=o[r]);return e};var O=()=>({inline:css({borderRadius:a.borderRadiusMedium,boxShadow:`0 0 0 1px ${a.gray200}`,"th:first-child":{borderTopLeftRadius:a.borderRadiusMedium},"th:last-child":{borderTopRightRadius:a.borderRadiusMedium},"tr:last-child td:first-child":{borderBottomLeftRadius:a.borderRadiusMedium},"tr:last-child td:last-child":{borderBottomRightRadius:a.borderRadiusMedium}}),embedded:css({borderBottom:`1px solid ${a.gray200}`}),root:css({width:"100%"})});var D=createContext({}),z=()=>useContext(D),F=D.Provider;var H=forwardRef((T,p)=>{var d=T,{children:o,className:t,layout:e="inline",testId:r="cf-ui-table",verticalAlign:l="top"}=d,m=i(d,["children","className","layout","testId","verticalAlign"]);let b=O();return P.createElement(Box,s(n({cellPadding:"0",cellSpacing:"0"},m),{as:"table",display:"table",ref:p,className:cx(b.root,b[e],t),testId:r}),P.createElement(F,{value:{verticalAlign:l}},o))});H.displayName="Table";function G(m,l){var p=m,{className:o,children:t,testId:e="cf-ui-table-body"}=p,r=i(p,["className","children","testId"]);return P.createElement(Box,s(n({},r),{as:"tbody",className:o,ref:l,testId:e}),t)}G.displayName="TableBody";var E=forwardRef(G);var u={body:{name:"body",as:"td",offsetTop:0},head:{name:"head",as:"th",offsetTop:0}},I=createContext(u.body),M=()=>useContext(I),N=I.Provider;var V=({align:o,isSortable:t,isTableHead:e,verticalAlign:r})=>({button:css({alignItems:"flex-start",appearance:"none",background:"none",border:0,color:"inherit",cursor:"pointer",display:"inline-flex",gap:a.spacing2Xs,outline:0,padding:a.spacingS,"&:focus":{backgroundColor:a.gray100,boxShadow:a.glowPrimary},"&:focus:not(:focus-visible)":{backgroundColor:"unset",boxShadow:"unset"},"&:focus-visible":{backgroundColor:a.gray100,boxShadow:a.glowPrimary}}),container:css({backgroundColor:a.colorWhite,borderBottom:`1px solid ${a.gray200}`,padding:t?0:a.spacingS,textAlign:o,color:e?a.gray600:a.gray700,fontWeight:e?a.fontWeightMedium:a.fontWeightNormal,verticalAlign:r}),sortIcon:l=>css({fill:a.gray400,opacity:l?1:0,transition:`opacity ${a.transitionEasingCubicBezier} ${a.transitionDurationDefault}`})});function Re(o){return isValidElement(o)&&!!o.props.children}function g(o){let t="";return Children.toArray(o).map(e=>{isValidElement(e)&&Re(e)?t+=g(e.props.children):(typeof e=="string"||typeof e=="number")&&(t=`${t}${e}`);}),t}var U=(e=>(e.Ascending="ascending",e.Descending="descending",e))(U||{}),ke={ascending:SortAscendingIcon,descending:SortDescendingIcon};function X(d,T){var b=d,{align:o="left",children:t,className:e,isSortable:r,sortDirection:l,testId:m="cf-ui-table-cell"}=b,p=i(b,["align","children","className","isSortable","sortDirection","testId"]);let[f,x]=useState(!1),{as:oe,name:te,offsetTop:re}=M(),{verticalAlign:le}=z(),ae=ke[l],S=te==="head",B=V({isSortable:S?r:void 0,isTableHead:S,align:o,verticalAlign:le}),ne=S?Caption:Text,se=r?{"aria-sort":l!=null?l:"none",onBlur:()=>x(!1),onFocus:()=>x(!0),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1)}:{},pe=useMemo(()=>g(t),[t]),A=t;return r&&(A=P.createElement("button",{"aria-label":`Sort ${l==="ascending"?"descending":"ascending"} by ${pe}`,className:B.button,type:"button"},t,l?P.createElement(ae,{size:"tiny",variant:"secondary"}):P.createElement(SortIcon,{"aria-hidden":!f,className:B.sortIcon(f),size:"tiny",variant:"secondary"}))),P.createElement(ne,s(n(n({},p),se),{as:oe,className:cx(B.container,e),ref:T,style:s(n({},p.style),{top:re||void 0}),testId:m}),A)}X.displayName="TableCell";var k=forwardRef(X);var J=()=>({root:css({color:a.gray600}),sticky:css({th:{position:"sticky",top:0,zIndex:a.zIndexDefault}})});var h=forwardRef((T,p)=>{var d=T,{children:o,className:t,isSticky:e=!1,offsetTop:r,testId:l="cf-ui-table-head"}=d,m=i(d,["children","className","isSticky","offsetTop","testId"]);let b=J(),f=cx(b.root,e&&b.sticky,t);return P.createElement(N,{value:s(n({},u.head),{offsetTop:r||0})},P.createElement(Box,s(n({},m),{as:"thead",className:f,ref:p,testId:l}),o))});h.displayName="TableHead";var ee=()=>({root:css({"&:last-child td":{borderBottom:"none"},"&:hover td":{backgroundColor:a.gray100}}),selected:css({"td, th":{backgroundColor:a.gray100}})});var R=forwardRef((p,m)=>{var T=p,{className:o,children:t,isSelected:e=!1,testId:r="cf-ui-table-row"}=T,l=i(T,["className","children","isSelected","testId"]);let d=ee();return P.createElement(Box,s(n({},l),{as:"tr",className:cx(d.root,{[d.selected]:e},o),ref:m,testId:r}),t)});R.displayName="TableRow";var y=H;y.Row=R;y.Head=h;y.Cell=k;y.Body=E;

export { y as Table, E as TableBody, k as TableCell, I as TableCellContext, N as TableCellContextProvider, U as TableCellSorting, h as TableHead, R as TableRow, u as contextOptions, M as useTableCellContext };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map