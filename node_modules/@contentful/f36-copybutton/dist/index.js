'use strict';

var d = require('react');
var f36Icons = require('@contentful/f36-icons');
var f36Tooltip = require('@contentful/f36-tooltip');
var f36Button = require('@contentful/f36-button');
var emotion = require('emotion');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var d__default = /*#__PURE__*/_interopDefault(d);

var L=Object.defineProperty,F=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var v=(t,o,e)=>o in t?L(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,f=(t,o)=>{for(var e in o||(o={}))h.call(o,e)&&v(t,e,o[e]);if(m)for(var e of m(o))E.call(o,e)&&v(t,e,o[e]);return t},C=(t,o)=>F(t,N(o));var g=(t,o)=>{var e={};for(var n in t)h.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&m)for(var n of m(t))o.indexOf(n)<0&&E.call(t,n)&&(e[n]=t[n]);return e};var T=(t,o,e)=>new Promise((n,i)=>{var p=r=>{try{a(e.next(r));}catch(l){i(l);}},c=r=>{try{a(e.throw(r));}catch(l){i(l);}},a=r=>r.done?n(r.value):Promise.resolve(r.value).then(p,c);a((e=e.apply(t,o)).next());});var w=({size:t})=>{let o=t==="small"?"32px":"40px";return {button:emotion.css({height:o,minHeight:"auto",minWidth:"auto",width:o})}};function H(A,z){var B=A,{className:t,isDisabled:o=!1,isLoading:e=!1,label:n,onBlur:i,onCopy:p,size:c="medium",testId:a="cf-ui-copy-button",tooltipCopiedText:r="Copied!",tooltipProps:l,tooltipText:k="Copy to clipboard",value:u}=B,M=g(B,["className","isDisabled","isLoading","label","onBlur","onCopy","size","testId","tooltipCopiedText","tooltipProps","tooltipText","value"]);let I=w({size:c}),[y,x]=d.useState(!1),S=d.useCallback(()=>T(this,null,function*(){try{yield window.navigator.clipboard.writeText(u);}catch(b){let s=document.createElement("input");s.style.display="none",document.body.appendChild(s),s.value=u,s.focus(),s.select();let P=document.execCommand("copy");if(P==="unsuccessful")throw new Error("Unable to copy value",{cause:P});s.remove();return}p==null||p(u),x(!0);}),[p,u]),D=b=>{y&&x(!1),i==null||i(b);};return d__default.default.createElement(f36Tooltip.Tooltip,C(f({content:y?r:k},l),{isDisabled:o}),d__default.default.createElement(f36Button.Button,C(f({"aria-label":y?"Value copied to clipboard":n!=null?n:"Copy to clipboard","aria-live":"assertive",className:emotion.cx(I.button,t),isDisabled:e||o,isLoading:e,onBlur:D,testId:a,startIcon:d__default.default.createElement(f36Icons.CopyIcon,{variant:"muted",size:c==="small"?"tiny":"small"}),variant:"secondary"},M),{onClick:S,ref:z})))}H.displayName="CopyButton";var q=d__default.default.forwardRef(H);

exports.CopyButton = q;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map